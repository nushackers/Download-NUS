<% include header %>
<% if ("id" in form) { %>
    <h2>Update Dataset</h2>
<% } else { %>
    <h2>Upload New Dataset</h2>
<% } %>
<% for (var i=0; i<messages.length; i++){ %>
	<div class="alert alert-warning">
		<%= messages[i] %>
	</div>
<% } %>
<form method="post" enctype="multipart/form-data">
    <fieldset>
        <div class="form-group">
            <label for="exampleInputEmail">Title</label>
            <input type="text" class="form-control" id="exampleInputEmail" name="name" placeholder="Enter title" value="<% if (form.name) { %><%= form.name %><% } %>">
        </div>
        <div class="form-group">
            <label for="exampleInputPassword">Description</label>
            <textarea class="form-control" id="exampleInputPassword" name="description" placeholder="Enter description"><% if (form.description) { %><%= form.description %><% } %></textarea>
        </div>
        <div class="form-group">
            <label for="exampleInputPassword">Category</label>
            <select class="form-control" name="categoryId">
                <% for (var i=0; i<categories.length; i++) { %>
                    <option <% if (form.categoryId == categories[i].id) { %>selected<% } %> value="<%= categories[i].id %>"><%= categories[i].name %></option>
                <% } %>
            </select>
        </div>
        <div class="form-group">
            <label for="exampleInputPassword">Class</label>
            <select class="form-control" name="typeId">
                <% for (var i=0; i<types.length; i++) { %>
                    <option <% if (form.typeId == types[i].id) { %>selected<% } %> value="<%= types[i].id %>"><%= types[i].name %></option>
                <% } %>
            </select>
        </div>
        <div class="form-group">
            <label for="file">Dataset</label>
            <% if ("id" in form) { %>
                <div class="alert alert-info">
                    <p>Uploading a new file to replace the old one.</p>
                    <p>Or leave this field blank</p>
                </div>
            <% } %>
            <input type="file" id="file" name="file">
            <p class="help-block">File types allowed: XLS, XLSX, CSV, TXT</p>
        </div>
        <button type="submit" class="btn btn-default btn-primary">Submit</button>
        <% if ("id" in form) { %>
            <button type="button" class="btn btn-default btn-danger" onClick="deleteDataset()">
                <span class="glyphicon glyphicon-remove"></span>
                Delete This Dataset
            </button>
        <% } %>
    </fieldset>
</form>
<% include footer %>
